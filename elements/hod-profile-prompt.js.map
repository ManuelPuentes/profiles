{"version":3,"file":"hod-profile-prompt.js","sourceRoot":"","sources":["../../src/elements/hod-profile-prompt.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,IAAI,EAAS,QAAQ,EAAE,MAAM,aAAa,CAAC;AAGrE,OAAO,yBAAyB,CAAC;AACjC,OAAO,iCAAiC,CAAC;AACzC,OAAO,sBAAsB,CAAC;AAC9B,OAAO,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AAEpD,OAAO,EAAE,YAAY,EAAE,MAAM,iBAAiB,CAAC;AAE/C;;GAEG;AACH,MAAM,OAAgB,gBAAiB,SAAQ,UAAU;IAAzD;QACE,wBAAwB;;QAKxB,yBAAyB;QAGzB,eAAU,GAAsB,SAAS,CAAC;IAoD5C,CAAC;IAlDC,MAAM,KAAK,MAAM;QACf,OAAO;YACL,YAAY;YACZ,GAAG,CAAA;;;;OAIF;SACF,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;YAC5C,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;IACnC,CAAC;IAED,sBAAsB;QACpB,OAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,IAAI,CAAC;IAC7D,CAAC;IAED,gBAAgB,CAAC,CAAc;;QAC7B,IAAI,CAAC,UAAU,GAAG;YAChB,EAAE,EAAE,MAAA,IAAI,CAAC,UAAU,0CAAE,EAAY;YACjC,OAAO,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO;SAC1B,CAAC;IACJ,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAA;;;;QAIP,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;+BACiB,IAAI,CAAC,gBAAgB;sCACd;YAC9B,CAAC,CAAC,IAAI,CAAA,iDAAiD;WACpD,CAAC;IACV,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAA;QACP,IAAI,CAAC,sBAAsB,EAAE;YAC7B,CAAC,CAAC,IAAI,CAAA,eAAe;YACrB,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE;KACxB,CAAC;IACJ,CAAC;CACF;AApDC;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;oDACe","sourcesContent":["import { LitElement, css, html, query, property } from 'lit-element';\nimport { ApolloClient } from '@apollo/client/core';\n\nimport '@material/mwc-textfield';\nimport '@material/mwc-circular-progress';\nimport '@material/mwc-button';\nimport { GET_MY_PROFILE } from '../graphql/queries';\nimport { Agent } from '../types';\nimport { sharedStyles } from '../sharedStyles';\n\n/**\n * @element hod-profile-prompt\n */\nexport abstract class HodProfilePrompt extends LitElement {\n  /** Public attributes */\n\n  /** Dependencies */\n  abstract get _apolloClient(): ApolloClient<any>;\n\n  /** Private properties */\n\n  @property({ type: Object })\n  _myProfile: Agent | undefined = undefined;\n\n  static get styles() {\n    return [\n      sharedStyles,\n      css`\n        :host {\n          display: flex;\n        }\n      `,\n    ];\n  }\n\n  async firstUpdated() {\n    const result = await this._apolloClient.query({\n      query: GET_MY_PROFILE,\n    });\n\n    this._myProfile = result.data.me;\n  }\n\n  agentHasCreatedProfile() {\n    return this._myProfile && this._myProfile.profile !== null;\n  }\n\n  onProfileCreated(e: CustomEvent) {\n    this._myProfile = {\n      id: this._myProfile?.id as string,\n      profile: e.detail.profile,\n    };\n  }\n\n  renderPrompt() {\n    return html` <div\n      class=\"column\"\n      style=\"align-items: center; justify-content: center; flex: 1;\"\n    >\n      ${this._myProfile\n        ? html`<hod-create-profile-form\n            @profile-created=${this.onProfileCreated}\n          ></hod-create-profile-form>`\n        : html`<mwc-circular-progress></mwc-circular-progress>`}\n    </div>`;\n  }\n\n  render() {\n    return html`\n      ${this.agentHasCreatedProfile()\n        ? html`<slot></slot>`\n        : this.renderPrompt()}\n    `;\n  }\n}\n"]}